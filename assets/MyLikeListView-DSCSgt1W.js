import{r as b,i as w,c as n,d,a as s,F as v,p as y,x as L,P as x,o as r,t as f,u as C,g as D,Q as $,h as N}from"./index-VyJHf4M5.js";import{u as U,N as B,_ as M}from"./NavbarCard-BTq0AE6c.js";import{_ as P}from"./LoadingOverlay-3h1urXEz.js";import{d as V}from"./dayjs.min-BInakxSv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={key:0},j={class:"container"},A={class:"row mt-4"},S={class:"col-lg-9"},F={key:0},H={key:1},E={class:"col-12"},Q={class:"card p-3 shadow-sm border border-3 border-dark"},R={class:"d-flex justify-content-between align-items-center"},T={class:"d-flex align-items-center"},q=["src"],z={class:"ms-3"},G={class:"mb-1 fw-bold"},I={class:"text-muted mb-0"},J=["onClick"],K=["onClick"],es={__name:"MyLikeListView",setup(O){const u=D(),c=b(!0),{showAlert:m}=N(),l=U(),i=b(),_=()=>{u.back()},k=o=>{u.push(`/certainpost/${o}`)},h=async o=>{const t=await x(o);i.value=t.likeList.map(e=>({...e,formattedDate:V(e.createdAt).format("YYYY-MM-DD HH:mm")}))},p=async(o,t)=>{try{await $(o,t),i.value=i.value.filter(e=>e._id!==o),m("已取消讚","success",1500)}catch(e){m(`${e.response.data.message}`,"error",2e3)}};return w(async()=>{try{l.loadUserInfo(),await h(l.token)}finally{c.value=!1}}),(o,t)=>{var e;return r(),n(v,null,[d(P,{"is-loading":c.value},null,8,["is-loading"]),c.value?L("",!0):(r(),n("div",Y,[d(B),s("div",j,[s("div",A,[s("main",S,[(e=i.value)!=null&&e.length?(r(),n("div",H,[s("div",{class:"row"},[s("div",{class:"col text-center relative"},[s("button",{class:"btn btn-success rounded-3 mb-2 absolute",onClick:_},t[2]||(t[2]=[s("i",{class:"bi bi-arrow-left"},null,-1)])),t[3]||(t[3]=s("h2",{class:"fw-bold"},"您按讚的文章",-1))])]),(r(!0),n(v,null,y(i.value,a=>(r(),n("div",{class:"row mt-2",key:a._id},[s("div",E,[s("div",Q,[s("div",R,[s("div",T,[s("img",{src:a.user.photo,alt:"用戶頭像",class:"rounded-circle border",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,q),s("div",z,[s("p",G,f(a.user.name),1),s("p",I,"發文時間："+f(a.formattedDate),1)])]),s("div",null,[s("button",{class:"btn btn-outline-success btn-sm me-1",onClick:g=>k(a._id)}," 查看貼文 ",8,J),s("button",{class:"btn btn-outline-danger btn-sm",onClick:g=>p(a._id,C(l).token)}," 取消按讚 ",8,K)])])])])]))),128))])):(r(),n("div",F,[s("div",{class:"container p-0"},[s("button",{class:"btn btn-success rounded-3 mb-2",onClick:_},t[0]||(t[0]=[s("i",{class:"bi bi-arrow-left"},null,-1)]))]),t[1]||(t[1]=s("div",{class:"custom-card border border-3 border-dark"},[s("div",{class:"card-content"},"目前沒有按讚的貼文，趕快按讚吧！")],-1))]))]),d(M)])])]))],64)}}};export{es as default};

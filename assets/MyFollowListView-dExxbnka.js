import{r as b,i as k,c as a,d as i,a as s,F as v,p as y,x,O as C,o as n,t as f,g as F,N as L,h as D}from"./index-VyJHf4M5.js";import{u as M,N,_ as U}from"./NavbarCard-BTq0AE6c.js";import{_ as $}from"./LoadingOverlay-3h1urXEz.js";import{d as V}from"./dayjs.min-BInakxSv.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={key:0},j={class:"container"},A={class:"row mt-4"},S={class:"col-lg-9"},H={key:0},E={key:1},I={class:"col-12"},O={class:"card p-3 shadow-sm border border-3 border-dark"},P={class:"d-flex justify-content-between align-items-center"},R={class:"d-flex align-items-center"},T=["src"],q={class:"ms-3"},z={class:"mb-1 fw-bold"},G={class:"text-muted mb-0"},J=["onClick"],K=["onClick"],Q={__name:"MyFollowListView",setup(W){const d=F(),c=b(!0),{showAlert:u}=D(),l=M(),r=b(),_=()=>{d.back()},g=o=>{d.push(`/otherpost/${o}`)},p=async()=>{const o=await C(l.token);r.value=o.followingList.map(t=>({...t,formattedDate:V(t.createAt).format("YYYY-MM-DD HH:mm")}))},w=async o=>{try{await L(o,l.token),r.value=r.value.filter(t=>t.user._id!==o),l.following.length-=1,u("已取消追蹤","success",2e3)}catch(t){console.log("error",t),u(`${t.response.data.message}`,"error",2e3)}};return k(async()=>{try{l.loadUserInfo(),await p()}catch(o){console.log(o)}finally{c.value=!1}}),(o,t)=>{var m;return n(),a(v,null,[i($,{"is-loading":c.value},null,8,["is-loading"]),c.value?x("",!0):(n(),a("div",Y,[i(N),s("div",j,[s("div",A,[s("main",S,[(m=r.value)!=null&&m.length?(n(),a("div",E,[s("div",{class:"row"},[s("div",{class:"col text-center relative"},[s("button",{class:"btn btn-success rounded-3 mb-2 absolute",onClick:_},t[2]||(t[2]=[s("i",{class:"bi bi-arrow-left"},null,-1)])),t[3]||(t[3]=s("h2",{class:"fw-bold"},"您追蹤的名單",-1))])]),(n(!0),a(v,null,y(r.value,e=>(n(),a("div",{class:"row mt-2",key:e._id},[s("div",I,[s("div",O,[s("div",P,[s("div",R,[s("img",{src:e.user.photo,alt:"用戶頭像",class:"rounded-circle border",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,T),s("div",q,[s("p",z,f(e.user.name),1),s("p",G,"追蹤時間："+f(e.formattedDate),1)])]),s("div",null,[s("button",{class:"btn btn-outline-success btn-sm me-1",onClick:h=>g(e.user._id)}," 查看個人資料 ",8,J),s("button",{class:"btn btn-outline-danger btn-sm",onClick:h=>w(e.user._id)}," 取消追蹤 ",8,K)])])])])]))),128))])):(n(),a("div",H,[s("div",{class:"container p-0"},[s("button",{class:"btn btn-success rounded-3 mb-2",onClick:_},t[0]||(t[0]=[s("i",{class:"bi bi-arrow-left"},null,-1)]))]),t[1]||(t[1]=s("div",{class:"custom-card border border-3 border-dark"},[s("div",{class:"card-content"},"目前沒有追蹤的對象，趕快追蹤一個人吧！")],-1))]))]),i(U)])])]))],64)}}},es=B(Q,[["__scopeId","data-v-307de923"]]);export{es as default};

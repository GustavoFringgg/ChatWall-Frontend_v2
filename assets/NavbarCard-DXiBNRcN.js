import{X as w,Y as p,o as u,c as m,a as t,d as l,e as r,f as a,u as i,t as d,g as x,r as k,i as y,j as I,y as g,h as T}from"./index-EPcCLbKF.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v=w("userStore",{state:()=>({username:"",userid:null,token:"",photo:"",formatTime:"",followers:[],following:[]}),actions:{setUserInfo(o,s){this.username=o.name,this.userid=o._id,this.token=s,this.photo=o.photo,this.formatTime=o.formatTime,this.followers=o.followers,this.following=o.following,this.googleId=o.googleId||null,localStorage.setItem("userInfo",JSON.stringify({username:this.username,userid:this.userid,token:this.token,photo:this.photo,formatTime:this.formatTime,followers:this.followers,following:this.following,googleId:this.googleId}))},clearUserInfo(){this.username="",this.userid=null,this.token="",this.photo="",localStorage.removeItem("userInfo")},loadUserInfo(){const o=localStorage.getItem("userInfo");if(o){const s=JSON.parse(o);this.username=s.username,this.userid=s.userid,this.token=s.token,this.photo=s.photo,this.formatTime=s.formatTime,this.followers=s.followers,this.following=s.following,this.googleId=s.googleId}}}}),S={class:"col-lg-3 d-none d-lg-block"},R={class:"card border border-3 border-dark"},C={class:"card-body text-center"},N={class:"d-flex flex-column align-items-start"},U={class:"d-flex align-items-center mb-3"},L={"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},j=["src"],A={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},V={class:"offcanvas-header bg-header"},z={id:"offcanvasRightLabel"},B={class:"offcanvas-body bg-color"},D=["src"],E={style:{width:"200px"},class:"mx-auto text-start"},J={class:"mb-3"},O={class:"mb-3"},nt={__name:"SidebarCard",setup(o){const s=v();return(b,n)=>{const h=p("RouterLink");return u(),m("aside",S,[t("div",R,[t("div",C,[l(h,{class:"btn btn-primary w-100 mb-3 text-decoration-none",to:"/userpost"},{default:r(()=>n[0]||(n[0]=[a("張貼動態")])),_:1}),t("div",N,[t("div",U,[t("div",L,[t("img",{src:i(s).photo,alt:"Avatar",class:"rounded-circle me-2",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,j),t("span",null,d(i(s).username),1)]),t("div",A,[t("div",V,[t("h5",z,d(i(s).username)+"的個人資料",1),n[1]||(n[1]=t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),t("div",B,[t("div",null,"姓名:"+d(i(s).username),1),t("img",{src:i(s).photo,alt:"userphoto",class:"rounded-circle mt-2 mb-3",style:{width:"200px",height:"200px","object-fit":"cover"}},null,8,D),t("div",E,[t("div",J,"註冊時間: "+d(i(s).formatTime),1),t("div",O,"粉絲: "+d(i(s).followers.length),1),t("div",null,"追蹤人數: "+d(i(s).following.length),1)])])])]),l(h,{class:"btn btn-light w-100 text-start mb-2",to:"/myfollowlist"},{default:r(()=>n[2]||(n[2]=[t("i",{class:"bi bi-bell me-2"},null,-1),a("追蹤名單")])),_:1}),l(h,{class:"btn btn-light w-100 text-start mb-2",to:"/mylikelist"},{default:r(()=>n[3]||(n[3]=[t("i",{class:"bi bi-hand-thumbs-up me-2"},null,-1),a("我按讚的文章")])),_:1})])])])])}}},W={class:"navbar navbar-expand-lg navbar-light bg-light border-bottom border-3 border-dark"},M={class:"container"},X={class:"d-flex align-items-center"},Y={class:"dropdown"},q={class:"btn btn-light dropdown-toggle d-flex align-items-center",type:"button",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},F=["src"],G={class:"fs-6"},H={class:"dropdown-menu","aria-labelledby":"userDropdown"},K={key:0},P={key:1},Q={key:2},Z={key:3},tt={__name:"NavbarCard",setup(o){const s=x(),b=v(),{showAlert:n}=T(),h=async()=>{n("登出成功，導回登入頁","success",1500),setTimeout(()=>{document.cookie="Token=; expires=Thu, 01 Jan 1970 00:00:00 UTC;",b.clearUserInfo(),s.push({path:"/"})},1500)},f=k(window.innerWidth<992),_=()=>{f.value=window.innerWidth<992};return y(()=>{window.addEventListener("resize",_)}),I(()=>{window.removeEventListener("resize",_)}),(st,e)=>{const c=p("RouterLink");return u(),m("header",null,[t("nav",W,[t("div",M,[l(c,{class:"rounded-pill navbar-header fs-4 my-2 text-decoration-none",to:"/index"},{default:r(()=>e[0]||(e[0]=[a("ChatWall雀窩")])),_:1}),t("div",X,[t("div",Y,[t("button",q,[t("img",{src:i(b).photo,alt:"User Avatar",class:"rounded-circle me-2",style:{width:"45px",height:"45px","object-fit":"cover"}},null,8,F),t("span",G,d(i(b).username),1)]),t("ul",H,[t("li",null,[l(c,{class:"dropdown-item text-decoration-none",to:"/mypost"},{default:r(()=>e[1]||(e[1]=[a("我的貼文牆")])),_:1})]),t("li",null,[l(c,{class:"dropdown-item text-decoration-none",to:"/profile"},{default:r(()=>e[2]||(e[2]=[a("修改個人資料")])),_:1})]),f.value?(u(),m("li",K,e[3]||(e[3]=[t("hr",{class:"dropdown-divider"},null,-1)]))):g("",!0),f.value?(u(),m("li",P,[l(c,{class:"btn btn-light w-100 text-start mb-2",to:"/userpost"},{default:r(()=>e[4]||(e[4]=[t("i",{class:"bi bi-card-text me-2"},null,-1),a("張貼動態")])),_:1})])):g("",!0),f.value?(u(),m("li",Q,[l(c,{class:"btn btn-light w-100 text-start mb-2",to:"/myfollowlist"},{default:r(()=>e[5]||(e[5]=[t("i",{class:"bi bi-bell me-2"},null,-1),a("追蹤名單")])),_:1})])):g("",!0),f.value?(u(),m("li",Z,[l(c,{class:"btn btn-light w-100 text-start mb-2",to:"/mylikelist"},{default:r(()=>e[6]||(e[6]=[t("i",{class:"bi bi-hand-thumbs-up me-2"},null,-1),a("按讚的文章")])),_:1})])):g("",!0),e[7]||(e[7]=t("li",null,[t("hr",{class:"dropdown-divider"})],-1)),t("li",null,[t("button",{type:"button",class:"dropdown-item",onClick:h},"登出")])])])])])])])}}},it=$(tt,[["__scopeId","data-v-11c68a8d"]]);export{it as N,nt as _,v as u};
